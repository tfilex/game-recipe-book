## Game Recipe Book

Небольшое, но продуманное веб‑приложение на **FastAPI + Vue 3**, которое генерирует детальные «рецепты по игре» на основе текстового запроса (название игры, сеттинг, персонажи и т.п.) и позволяет сохранять их в личный кабинет.

---

## Возможности

- **Генерация игровых рецептов**
  - Ввод запроса в свободной форме: «горячий гуляш как в Ведьмак 3, на 4 порции», «пикник из Stardew Valley», «праздничный пир из Skyrim с ограничением по бюджету» и т.п.
  - Отправка запроса на backend (`/api/recipe`) и далее в **n8n**‑воркфлоу для генерации готового рецепта.
  - Отображение структурированного результата в удобном формате (заголовки, списки, шаги).

- **Современный фронтенд**
  - Одностраничный интерфейс на **Vue 3 (Composition API)**, монтируемый в Jinja2‑шаблон `index.html`.
  - Две основные вкладки:
    - **«Генерация рецептов»** — форма ввода запроса и просмотр текущего результата.
    - **«Личный кабинет»** — список сохранённых рецептов с выбором и редактированием.
  - Примеры запросов в один клик, контекстные подсказки по выбранной игре, статус‑индикатор «Онлайн‑советник».

- **Личный кабинет и CRUD по рецептам**
  - Регистрация и вход пользователя (простая аутентификация через `/api/auth/*`).
  - Сохранение текущего рецепта в базу (`POST /api/recipes`).
  - Загрузка списка рецептов (`GET /api/recipes`).
  - Загрузка конкретного рецепта (`GET /api/recipes/{id}`).
  - Редактирование сохранённого рецепта (`PUT /api/recipes/{id}`).
  - Удаление рецепта (`DELETE /api/recipes/{id}`).
  - В интерфейсе: список рецептов, предпросмотр, выбор, редактирование и сохранение изменений.

- **UI/UX**
  - Тёмная, аккуратная **glass‑/card‑стилистика** (см. `app/static/css/style.css`).
  - Адаптивная вёрстка (десктоп и мобильные устройства).
  - Модальные окна для входа и регистрации.
  - Плавные состояния загрузки, подсказки, валидация, удобочитаемый вывод рецептов.

- **Интеграция с n8n**
  - Backend пересылает текстовый запрос в n8n‑webhook.
  - n8n отвечает готовым текстом рецепта, который очищается от HTML‑тегов и выводится пользователю.

---

## Технологии

- **Backend**
  - FastAPI — основное веб‑API.
  - Pydantic, Uvicorn.
  - Простая аутентификация (cookie‑/session‑подход, см. `backend/`).

- **Frontend**
  - Vue 3 (Composition API) — логика приложения (`app/static/js/app.js`).
  - Jinja2 — серверный рендеринг базового шаблона (`app/templates/index.html`).
  - Чистый CSS без фреймворков (`app/static/css/style.css`).

- **Интеграции**
  - **n8n** — генерация рецептов через webhook.

---

## Требования

- Python **3.12+**
- Установленные зависимости из `pyproject.toml`
- Запущенный/доступный **n8n** с настроенным webhook

---

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd game-recipe-book
```

### 2. Виртуальное окружение

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
```

### 3. Установка зависимостей

Через `pip`:

```bash
pip install -e .
```

или через `uv`:

```bash
uv sync
```

### 4. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
N8N_WEBHOOK_URL=https://ваш-n8n-сервер/webhook/ваш-id
# при необходимости: DATABASE_URL, SECRET_KEY и т.п.
```

Убедитесь, что соответствующий воркфлоу в n8n слушает этот webhook и возвращает JSON вида:

```json
{
  "recipe": "Текст сгенерированного рецепта..."
}
```

### 5. Запуск приложения

```bash
uvicorn app.main:app --reload
```

По умолчанию приложение будет доступно по адресу:

- `http://127.0.0.1:8000/`

---

## Краткое описание API

> Подробности см. в коде `app/main.py` и `backend/`.

- **Генерация рецепта**
  - `POST /api/recipe`
  - Тело: `{ "chat_input": "<строка запроса>" }`
  - Ответ: `{ "recipe": "<текст рецепта>" }`

- **Аутентификация**
  - `POST /api/auth/register` — регистрация пользователя.
  - `POST /api/auth/login` — вход, установка cookie/сессии.
  - `POST /api/auth/logout` — выход.
  - `GET  /api/auth/me` — проверка текущей сессии.

- **Рецепты (личный кабинет)**
  - `GET    /api/recipes` — список рецептов текущего пользователя.
  - `POST   /api/recipes` — создание нового рецепта.
  - `GET    /api/recipes/{id}` — получение рецепта по ID.
  - `PUT    /api/recipes/{id}` — обновление рецепта.
  - `DELETE /api/recipes/{id}` — удаление рецепта.

---

## Структура проекта

```text
game-recipe-book/
├── app/
│   ├── __init__.py
│   ├── main.py              # Основное приложение FastAPI (роуты /, /api/recipe и т.д.)
│   ├── templates/
│   │   └── index.html       # Jinja2-шаблон, в который монтируется Vue-приложение
│   └── static/
│       ├── css/
│       │   └── style.css    # Стиль тёмного, «glass»-интерфейса
│       └── js/
│           └── app.js       # Vue 3 (Composition API), логика генерации и личного кабинета
├── backend/                 # Дополнительный FastAPI-сервис / бизнес-логика (пример)
├── pyproject.toml           # Зависимости и настройки проекта
└── README.md                # Описание проекта (этот файл)
```

---

## Режим разработки

Для локальной разработки с авто‑перезапуском сервера:

```bash
uvicorn app.main:app --reload
```

Фронтенд — обычный статический Vue‑код; сборка не требуется, достаточно изменять файлы в `app/static/js/app.js` и `app/static/css/style.css`, перезагрузив страницу в браузере.

---

## Лицензия

MIT © 2025 Dudolin Deins. См. файл [`LICENSE`](LICENSE).